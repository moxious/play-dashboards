{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":false,"canDelete":false,"slug":"citibike-example-overview","url":"/d/krY2rty7z/citibike-example-overview","expires":"0001-01-01T00:00:00Z","created":"2022-03-29T15:20:02Z","updated":"2023-01-18T20:35:19Z","updatedBy":"chrisshih","createdBy":"chrisshih","version":11,"hasAcl":false,"isFolder":false,"folderId":1430,"folderUid":"M658Xts7z","folderTitle":"Business Intelligence","folderUrl":"/dashboards/f/M658Xts7z/business-intelligence","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}},"hasPublicDashboard":false,"publicDashboardAccessToken":"","publicDashboardUid":"","publicDashboardEnabled":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Example use of Grafana of Business Intelligence, leveraging BigQuery's public citibike dataset and dbt Cloud","editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":1431,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":5,"w":20,"x":0,"y":0},"id":4,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003ch1\u003eCitibike Dashboard Example:\u003c/h1\u003e\n\n  \u003ch3\u003eBigQuery Public Dataset\u003c/h3\u003e\n  \n  - Data: bigquery-public-data.new_york_citibike\n  - Timeframe: subset of data from Apr'17 - May'18\n  - Transformation: dbt cloud (developer tier) - [dbt project github repo](https://github.com/chs820/grafana_blog_bi)\n           ","mode":"markdown"},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":2,"w":4,"x":20,"y":0},"id":2,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cdiv\u003e\n  \u003cimg src=\"https://grafana.com/static/assets/internal/grafana_logo-web.svg\"\u003e\n\u003c/div\u003e","mode":"html"},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"fieldConfig":{"defaults":{"color":{"fixedColor":"#b5b5b5","mode":"fixed"},"custom":{"align":"center","displayMode":"color-background-solid","inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"dateTimeFromNow"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":20,"y":2},"id":12,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"showHeader":false},"pluginVersion":"9.3.2-67a213dc85","targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"select\n  max(date_stamp) as last_updated\nfrom\n  chris-analytics-testing.dbt_cshih.agg_trips_by_station_daily","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Data Last Updated","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"last_updated":"Last Updated"}}}],"transparent":true,"type":"table"},{"collapsed":false,"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":1,"w":24,"x":0,"y":5},"id":8,"panels":[],"targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"type":"row"},{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":2,"w":24,"x":0,"y":6},"id":25,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cdiv style=\"vertical-align: top; border: 0px;\"\"\u003e\n    \u003cp style=\"text-align: center; font-size: 150%; padding: 0px; margin: 0px;\"\u003e\n        \u003cb\u003eOverview\u003c/b\u003e\n    \u003c/p\u003e\n    \u003cp style=\"text-align: center; font-size: 95%; padding: 0px; margin: 0px\"\u003e\n        \u003cem\u003e(updates based on top time selection)\u003c/em\u003e\n    \u003c/p\u003e \n\u003c/div\u003e","mode":"html"},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"datasource","uid":"-- Dashboard --"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byName","options":"Trip Duration (minutes)"},"properties":[{"id":"color","value":{"fixedColor":"text","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Total Trips"},"properties":[{"id":"color","value":{"fixedColor":"super-light-purple","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Average Trip Duration (minutes)"},"properties":[{"id":"decimals","value":1},{"id":"color","value":{"fixedColor":"dark-purple","mode":"fixed"}}]}]},"gridPos":{"h":4,"w":24,"x":0,"y":8},"id":14,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{"titleSize":18,"valueSize":48},"textMode":"auto"},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"datasource","uid":"-- Dashboard --"},"panelId":10,"refId":"A"}],"title":"Average Daily Summary","transformations":[{"id":"seriesToColumns","options":{}},{"id":"organize","options":{"excludeByName":{"t7d_trips":true,"trail_7_day_moving_average":true,"trailing_7_day_ma_duration":true,"trailing_7_day_ma_trips":true},"indexByName":{"average_trip_duration_minutes":3,"date_stamp":0,"total_trip_duration_minutes":1,"total_trips":2,"trailing_7_day_ma_duration":5,"trailing_7_day_ma_trips":4},"renameByName":{"Time":"","average_trip_duration_minutes":"Average Trip Duration (minutes)","total_trip_duration_minutes":"Trip Duration (minutes)","total_trips":"Total Trips","trail_7_day_moving_average":""}}}],"transparent":true,"type":"stat"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byName","options":"Total Duration (minutes)"},"properties":[{"id":"color","value":{"fixedColor":"#797979","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"7-day Moving Average"},"properties":[{"id":"color","value":{"fixedColor":"yellow","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]}]},"gridPos":{"h":11,"w":24,"x":0,"y":12},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\ndaily_trips as (\n\n    select\n        cast(u.date_stamp as timestamp) as date_stamp\n        ,sum(u.total_trips) as total_trips\n        ,sum(u.total_trip_duration_minutes) as total_trip_duration_minutes\n        ,1.0 * sum(u.total_trip_duration_minutes) / sum(u.total_trips) as average_trip_duration_minutes\n    from\n        chris-analytics-testing.dbt_cshih.agg_trips_by_user_type_daily u\n    group by 1\n    order by 1\n\n),\n\nfinal as (\n\n    select\n        date_stamp\n        ,total_trips\n        ,total_trip_duration_minutes\n        ,average_trip_duration_minutes\n        ,avg(total_trips) over (order by date_stamp asc rows between 6 preceding and current row) as trailing_7_day_ma_trips\n        ,avg(total_trip_duration_minutes) over (order by date_stamp asc rows between 6 preceding and current row) as trailing_7_day_ma_duration\n\n    from\n        daily_trips\n\n)\n\nselect *\nfrom final\nwhere $__timeFilter(date_stamp)\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Daily Citibike Trip Duration (minutes)","transformations":[{"id":"seriesToColumns","options":{}},{"id":"organize","options":{"excludeByName":{"average_trip_duration_minutes":true,"total_trip_duration_minutes":false,"total_trips":true,"trailing_7_day_ma_trips":true},"indexByName":{},"renameByName":{"average_trip_duration":"Average Trip Duration (minutes)","average_trip_duration_minutes":"","date_stamp":"","t7d_trips":"7-day Moving Average","total_trip_duration":"Total Trip Duration (minutes)","total_trip_duration_minutes":"Total Duration (minutes)","total_trips":"Total Trips","trail_7_day_moving_average":"7-day Moving Average","trailing_7_day_ma_duration":"7-day Moving Average","trailing_7_day_ma_trips":""}}}],"transparent":true,"type":"timeseries"},{"collapsed":false,"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":1,"w":24,"x":0,"y":23},"id":33,"panels":[],"targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"type":"row"},{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":2,"w":24,"x":0,"y":24},"id":34,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cdiv style=\"vertical-align: top; border: 0px;\"\"\u003e\n    \u003cp style=\"text-align: center; font-size: 150%; padding: 0px; margin: 0px;\"\u003e\n        \u003cb\u003eTrip Stats by Rider Characteristics\u003c/b\u003e\n    \u003c/p\u003e\n    \u003cp style=\"text-align: center; font-size: 95%; padding: 0px; margin: 0px\"\u003e\n        \u003cem\u003e(updates based on top time selection)\u003c/em\u003e\n    \u003c/p\u003e \n\u003c/div\u003e","mode":"html"},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[],"max":800000,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"super-light-orange","value":null},{"color":"light-yellow","value":100000},{"color":"light-green","value":400000}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":8,"x":0,"y":26},"id":27,"options":{"displayMode":"lcd","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"text":{"titleSize":18,"valueSize":24}},"pluginVersion":"9.3.2-67a213dc85","targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\ntrips as (\n\n    select\n        *\n        ,cast(date_stamp as timestamp) as time\n    from chris-analytics-testing.dbt_cshih.agg_trips_by_user_type_daily\n\n),\n\nfinal as (\n\n    select\n        avg(case when t.user_type = 'Customer' then t.total_trip_duration_minutes end) as customer_daily_trip_duration\n        ,avg(case when t.user_type = 'Subscriber' then t.total_trip_duration_minutes end) as subscriber_daily_trip_duration\n\n        ,avg(case when t.user_type = 'Customer' then t.total_trips end) as customer_daily_trips\n        ,avg(case when t.user_type = 'Subscriber' then t.total_trips end) as subscriber_daily_trips\n\n        ,avg(case when t.user_type = 'Customer' then t.average_trip_duration_minutes end) as customer_daily_average_trip_duration\n        ,avg(case when t.user_type = 'Subscriber' then t.average_trip_duration_minutes end) as subscriber_daily_average_trip_duration\n    from\n        trips t\n    where\n        $__timeFilter(time)\n\n)\n\nselect *\nfrom final\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Total Daily Trip Duration (minutes)","transformations":[{"id":"organize","options":{"excludeByName":{"average_trip_duration_minutes":true,"customer_daily_average_trip_duration":true,"customer_daily_trips":true,"subscriber_daily_average_trip_duration":true,"subscriber_daily_trips":true,"total_trip_duration_minutes":false,"total_trips":true,"trailing_7_day_ma_trips":true},"indexByName":{},"renameByName":{"average_trip_duration":"Average Trip Duration (minutes)","average_trip_duration_minutes":"","customer_daily_trip_duration":"Customer","date_stamp":"","subscriber_daily_trip_duration":"Subscriber","t7d_trips":"7-day Moving Average","total_trip_duration":"Total Trip Duration (minutes)","total_trip_duration_minutes":"Total Duration (minutes)","total_trips":"Total Trips","trail_7_day_moving_average":"7-day Moving Average","trailing_7_day_ma_duration":"7-day Moving Average","trailing_7_day_ma_trips":""}}}],"transparent":true,"type":"bargauge"},{"datasource":{"type":"datasource","uid":"-- Dashboard --"},"description":"","fieldConfig":{"defaults":{"color":{"fixedColor":"super-light-purple","mode":"fixed"},"decimals":0,"mappings":[],"max":70000,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":8,"x":8,"y":26},"id":29,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"text":{"titleSize":18,"valueSize":24}},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"datasource","uid":"-- Dashboard --"},"panelId":27,"refId":"A"}],"title":"Daily Trips","transformations":[{"id":"organize","options":{"excludeByName":{"average_trip_duration_minutes":true,"customer_daily_average_trip_duration":true,"customer_daily_trip_duration":true,"subscriber_daily_average_trip_duration":true,"subscriber_daily_trip_duration":true,"total_trip_duration_minutes":false,"total_trips":true,"trailing_7_day_ma_trips":true},"indexByName":{},"renameByName":{"average_trip_duration":"Average Trip Duration (minutes)","average_trip_duration_minutes":"","customer_daily_average_trip_duration":"","customer_daily_trip_duration":"","customer_daily_trips":"Customer","date_stamp":"","subscriber_daily_average_trip_duration":"","subscriber_daily_trip_duration":"","subscriber_daily_trips":"Subscriber","t7d_trips":"7-day Moving Average","total_trip_duration":"Total Trip Duration (minutes)","total_trip_duration_minutes":"Total Duration (minutes)","total_trips":"Total Trips","trail_7_day_moving_average":"7-day Moving Average","trailing_7_day_ma_duration":"7-day Moving Average","trailing_7_day_ma_trips":""}}}],"transparent":true,"type":"bargauge"},{"datasource":{"type":"datasource","uid":"-- Dashboard --"},"description":"","fieldConfig":{"defaults":{"color":{"fixedColor":"semi-dark-purple","mode":"fixed"},"decimals":1,"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":8,"x":16,"y":26},"id":28,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"text":{"titleSize":18,"valueSize":24}},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"datasource","uid":"-- Dashboard --"},"panelId":27,"refId":"A"}],"title":"Average Trip Duration (minutes)","transformations":[{"id":"organize","options":{"excludeByName":{"average_trip_duration_minutes":true,"customer_daily_trip_duration":true,"customer_daily_trips":true,"subscriber_daily_trip_duration":true,"subscriber_daily_trips":true,"total_trip_duration_minutes":false,"total_trips":true,"trailing_7_day_ma_trips":true},"indexByName":{},"renameByName":{"average_trip_duration":"Average Trip Duration (minutes)","average_trip_duration_minutes":"","customer_daily_average_trip_duration":"Customer","customer_daily_trip_duration":"","date_stamp":"","subscriber_daily_average_trip_duration":"Subscriber","subscriber_daily_trip_duration":"","t7d_trips":"7-day Moving Average","total_trip_duration":"Total Trip Duration (minutes)","total_trip_duration_minutes":"Total Duration (minutes)","total_trips":"Total Trips","trail_7_day_moving_average":"7-day Moving Average","trailing_7_day_ma_duration":"7-day Moving Average","trailing_7_day_ma_trips":""}}}],"transparent":true,"type":"bargauge"},{"cards":{},"color":{"cardColor":"#5794F2","colorScale":"sqrt","colorScheme":"interpolateBlues","exponent":1.2,"mode":"opacity"},"dataFormat":"tsbuckets","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"description":"","fieldConfig":{"defaults":{"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false},"scaleDistribution":{"type":"linear"}}},"overrides":[]},"gridPos":{"h":14,"w":24,"x":0,"y":32},"heatmap":{},"hideZeroBuckets":true,"highlightCards":true,"id":35,"legend":{"show":false},"options":{"calculate":false,"calculation":{},"cellGap":2,"cellValues":{},"color":{"exponent":0.5,"fill":"#5794F2","mode":"opacity","reverse":false,"scale":"exponential","scheme":"Oranges","steps":128},"exemplars":{"color":"rgba(255,0,255,0.7)"},"filterValues":{"le":1e-9},"legend":{"show":false},"rowsFrame":{"layout":"unknown"},"showValue":"never","tooltip":{"show":true,"yHistogram":true},"yAxis":{"axisPlacement":"left","reverse":false,"unit":"short"}},"pluginVersion":"9.3.2-67a213dc85","reverseYBuckets":false,"targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\nfinal as (\n    \n    select\n        cast(date_trunc(t.date_stamp, week) as timestamp) as time\n        ,sum(case when t.rider_age between 20 and 24 then t.total_trip_duration_minutes end) as age_20_24\n        ,sum(case when t.rider_age between 25 and 29 then t.total_trip_duration_minutes end) as age_25_29\n        ,sum(case when t.rider_age between 30 and 34 then t.total_trip_duration_minutes end) as age_30_34\n        ,sum(case when t.rider_age between 35 and 39 then t.total_trip_duration_minutes end) as age_35_39\n        ,sum(case when t.rider_age between 40 and 44 then t.total_trip_duration_minutes end) as age_40_44\n        ,sum(case when t.rider_age between 45 and 49 then t.total_trip_duration_minutes end) as age_45_49\n        ,sum(case when t.rider_age between 50 and 54 then t.total_trip_duration_minutes end) as age_50_54\n        ,sum(case when t.rider_age between 55 and 59 then t.total_trip_duration_minutes end) as age_55_59\n        ,sum(case when t.rider_age between 60 and 64 then t.total_trip_duration_minutes end) as age_60_64\n        ,sum(case when t.rider_age \u003e= 65 then t.total_trip_duration_minutes end) as age_65\n    from\n        chris-analytics-testing.dbt_cshih.agg_trips_by_age_daily t\n    group by 1\n\n)\n\nselect *\nfrom final\nwhere $__timeFilter(time)\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Heatmap Distribution: Daily Trips by Rider Age","tooltip":{"show":true,"showHistogram":true},"transformations":[{"id":"sortBy","options":{"fields":{},"sort":[{"desc":false,"field":"time"}]}},{"id":"organize","options":{"excludeByName":{"average_trip_duration_minutes":true,"total_trip_duration_minutes":false,"total_trips":true,"trailing_7_day_ma_trips":true},"indexByName":{},"renameByName":{"age_100":"100+","age_10_19":"10 - 19","age_20_24":"20 - 24","age_20_29":"20 - 29","age_25_29":"25 - 29","age_30_34":"30 - 34","age_30_39":"30 - 39","age_35_39":"35 - 39","age_40_44":"40 - 44","age_40_49":"40 - 49","age_45_49":"45 - 49","age_50_54":"50 - 54","age_50_59":"50 - 59","age_55_59":"55 - 59","age_60_64":"60 - 64","age_60_69":"60 - 69","age_65":"65+","age_70_79":"70 - 79","age_80_89":"80 - 89","age_90_99":"90 - 99","average_trip_duration":"Average Trip Duration (minutes)","average_trip_duration_minutes":"","date_stamp":"","t7d_trips":"7-day Moving Average","time":"Week","total_trip_duration":"Total Trip Duration (minutes)","total_trip_duration_minutes":"Total Duration (minutes)","total_trips":"Total Trips","trail_7_day_moving_average":"7-day Moving Average","trailing_7_day_ma_duration":"7-day Moving Average","trailing_7_day_ma_trips":""}}}],"transparent":true,"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"short","logBase":1,"show":true},"yBucketBound":"middle"},{"collapsed":false,"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":1,"w":24,"x":0,"y":46},"id":18,"panels":[],"targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"type":"row"},{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":2,"w":24,"x":0,"y":47},"id":26,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cdiv style=\"vertical-align: top; border: 0px;\"\"\u003e\n    \u003cp style=\"text-align: center; font-size: 150%; padding: 0px; margin: 0px;\"\u003e\n        \u003cb\u003eBike Station Details\u003c/b\u003e\n    \u003c/p\u003e\n    \u003cp style=\"text-align: center; font-size: 95%; padding: 0px; margin: 0px\"\u003e\n        \u003cem\u003e(updates based on top time selection)\u003c/em\u003e\n    \u003c/p\u003e \n\u003c/div\u003e","mode":"html"},"pluginVersion":"9.3.2-67a213dc85","targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"fieldConfig":{"defaults":{"color":{"mode":"fixed"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byRegexp","options":"Avg.*"},"properties":[{"id":"decimals","value":0}]}]},"gridPos":{"h":21,"w":12,"x":0,"y":49},"id":23,"options":{"basemap":{"config":{},"name":"Layer 0","tooltip":false,"type":"default"},"controls":{"mouseWheelZoom":true,"showAttribution":false,"showDebug":false,"showMeasure":false,"showScale":true,"showZoom":true},"layers":[{"config":{"showLegend":false,"style":{"color":{"fixed":"blue"},"opacity":0.3,"rotation":{"fixed":0,"max":360,"min":-360,"mode":"mod"},"size":{"field":"Avg Daily Trip Starts","fixed":5,"max":10,"min":1},"symbol":{"fixed":"img/icons/marker/circle.svg","mode":"fixed"},"text":{"fixed":"","mode":"field"},"textConfig":{"fontSize":12,"offsetX":0,"offsetY":0,"textAlign":"center","textBaseline":"middle"}}},"location":{"latitude":"station_latitude","longitude":"station_longitude","mode":"coords"},"name":"Stations","tooltip":true,"type":"markers"}],"tooltip":{"mode":"details"},"view":{"allLayers":true,"id":"coords","lat":40.762025,"lon":-73.978143,"zoom":12.38}},"pluginVersion":"9.3.2-67a213dc85","targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\nstation_trips as (\n\n    select\n        cast(t.date_stamp as timestamp) as time\n        ,t.station_name\n        ,t.station_latitude\n        ,t.station_longitude\n        ,t.starting_trips\n        ,t.ending_trips\n    from\n        chris-analytics-testing.dbt_cshih.agg_trips_by_station_daily t\n\n),\n\nfinal as (\n\n    select\n        station_latitude\n        ,station_longitude\n        ,station_name\n        ,avg(starting_trips) as average_daily_starting_trips\n        ,avg(ending_trips) as average_daily_ending_trips\n    from\n        station_trips\n    where\n        $__timeFilter(time)\n    group by 1,2,3\n\n)\n\nselect *\nfrom final\nwhere average_daily_starting_trips \u003e 0\n\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Most popular stations: Trip Origins","transformations":[{"id":"organize","options":{"excludeByName":{"average_daily_ending_trips":false},"indexByName":{"average_daily_trips":3,"station_latitude":1,"station_longitude":2,"station_name":0},"renameByName":{"average_daily_ending_trips":"Avg Daily Trip Ends","average_daily_starting_trips":"Avg Daily Trip Starts","average_daily_trips":"Avg Daily Trips","station_latitude":"Latitude","station_longitude":"Longitude","station_name":"Station Name"}}}],"transparent":true,"type":"geomap"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"fixed"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byRegexp","options":"Avg.*"},"properties":[{"id":"decimals","value":0}]}]},"gridPos":{"h":21,"w":12,"x":12,"y":49},"id":37,"options":{"basemap":{"config":{},"name":"Layer 0","tooltip":false,"type":"default"},"controls":{"mouseWheelZoom":true,"showAttribution":false,"showDebug":false,"showMeasure":false,"showScale":true,"showZoom":true},"layers":[{"config":{"showLegend":false,"style":{"color":{"fixed":"purple"},"opacity":0.3,"rotation":{"fixed":0,"max":360,"min":-360,"mode":"mod"},"size":{"field":"Avg Daily Trip Ends","fixed":5,"max":10,"min":1},"symbol":{"fixed":"img/icons/marker/circle.svg","mode":"fixed"},"text":{"fixed":"","mode":"field"},"textConfig":{"fontSize":12,"offsetX":0,"offsetY":0,"textAlign":"center","textBaseline":"middle"}}},"location":{"latitude":"station_latitude","longitude":"station_longitude","mode":"coords"},"name":"Stations","tooltip":true,"type":"markers"}],"tooltip":{"mode":"details"},"view":{"allLayers":true,"id":"coords","lat":40.762025,"lon":-73.978143,"zoom":12.38}},"pluginVersion":"9.3.2-67a213dc85","targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"lPrMwAs7k"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\nstation_trips as (\n\n    select\n        cast(t.date_stamp as timestamp) as time\n        ,t.station_name\n        ,t.station_latitude\n        ,t.station_longitude\n        ,t.starting_trips\n        ,t.ending_trips\n    from\n        chris-analytics-testing.dbt_cshih.agg_trips_by_station_daily t\n\n),\n\nfinal as (\n\n    select\n        station_latitude\n        ,station_longitude\n        ,station_name\n        ,avg(starting_trips) as average_daily_starting_trips\n        ,avg(ending_trips) as average_daily_ending_trips\n    from\n        station_trips\n    where\n        $__timeFilter(time)\n    group by 1,2,3\n\n)\n\nselect *\nfrom final\nwhere average_daily_ending_trips \u003e 0\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Most popular stations: Trip Destinations","transformations":[{"id":"organize","options":{"excludeByName":{"average_daily_ending_trips":false},"indexByName":{"average_daily_trips":3,"station_latitude":1,"station_longitude":2,"station_name":0},"renameByName":{"average_daily_ending_trips":"Avg Daily Trip Ends","average_daily_starting_trips":"Avg Daily Trip Starts","average_daily_trips":"Avg Daily Trips","station_latitude":"Latitude","station_longitude":"Longitude","station_name":"Station Name"}}}],"transparent":true,"type":"geomap"},{"collapsed":false,"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":1,"w":24,"x":0,"y":70},"id":41,"panels":[],"targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"type":"row"},{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":2,"w":24,"x":0,"y":71},"id":42,"options":{"content":"\u003cdiv style=\"vertical-align: top; border: 0px;\"\"\u003e\n    \u003cp style=\"text-align: center; font-size: 150%; padding: 0px; margin: 0px;\"\u003e\n        \u003cb\u003eData \u0026 Analytics News\u003c/b\u003e\n    \u003c/p\u003e\n    \u003cp style=\"text-align: center; font-size: 95%; padding: 0px; margin: 0px\"\u003e\n        \u003cem\u003e(RSS Feeds)\u003c/em\u003e\n    \u003c/p\u003e \n\u003c/div\u003e","mode":"html"},"pluginVersion":"8.4.4","targets":[{"datasource":{"type":"graphite","uid":"000000001"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"23HRW6E7z"},"gridPos":{"h":17,"w":12,"x":0,"y":73},"id":43,"options":{"feedUrl":"https://grafana.com/blog/news.xml","showImage":true},"pluginVersion":"8.4.4","targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"23HRW6E7z"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\nstation_trips as (\n\n    select\n        cast(t.date_stamp as timestamp) as time\n        ,t.station_name\n        ,t.station_latitude\n        ,t.station_longitude\n        ,t.starting_trips\n        ,t.ending_trips\n    from\n        grafanablog.dbt_cshih.agg_trips_by_station_daily t\n\n),\n\nfinal as (\n\n    select\n        station_latitude\n        ,station_longitude\n        ,station_name\n        ,avg(starting_trips) as average_daily_starting_trips\n        ,avg(ending_trips) as average_daily_ending_trips\n    from\n        station_trips\n    where\n        $__timeFilter(time)\n    group by 1,2,3\n\n)\n\nselect *\nfrom final\nwhere average_daily_starting_trips \u003e 0\n\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Grafana News","transformations":[{"id":"organize","options":{"excludeByName":{"average_daily_ending_trips":false},"indexByName":{"average_daily_trips":3,"station_latitude":1,"station_longitude":2,"station_name":0},"renameByName":{"average_daily_ending_trips":"Avg Daily Trip Ends","average_daily_starting_trips":"Avg Daily Trip Starts","average_daily_trips":"Avg Daily Trips","station_latitude":"Latitude","station_longitude":"Longitude","station_name":"Station Name"}}}],"transparent":true,"type":"news"},{"datasource":{"type":"grafana-bigquery-datasource","uid":"23HRW6E7z"},"gridPos":{"h":17,"w":12,"x":12,"y":73},"id":44,"options":{"feedUrl":"https://analyticsengineeringroundup.libsyn.com/rss","showImage":true},"pluginVersion":"8.4.4","targets":[{"dataset":"","datasource":{"type":"grafana-bigquery-datasource","uid":"23HRW6E7z"},"editorMode":"code","format":1,"location":"US","rawQuery":true,"rawSql":"with\n\nstation_trips as (\n\n    select\n        cast(t.date_stamp as timestamp) as time\n        ,t.station_name\n        ,t.station_latitude\n        ,t.station_longitude\n        ,t.starting_trips\n        ,t.ending_trips\n    from\n        grafanablog.dbt_cshih.agg_trips_by_station_daily t\n\n),\n\nfinal as (\n\n    select\n        station_latitude\n        ,station_longitude\n        ,station_name\n        ,avg(starting_trips) as average_daily_starting_trips\n        ,avg(ending_trips) as average_daily_ending_trips\n    from\n        station_trips\n    where\n        $__timeFilter(time)\n    group by 1,2,3\n\n)\n\nselect *\nfrom final\nwhere average_daily_starting_trips \u003e 0\n\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}]}}],"title":"Analytics Engineering Roundup","transformations":[{"id":"organize","options":{"excludeByName":{"average_daily_ending_trips":false},"indexByName":{"average_daily_trips":3,"station_latitude":1,"station_longitude":2,"station_name":0},"renameByName":{"average_daily_ending_trips":"Avg Daily Trip Ends","average_daily_starting_trips":"Avg Daily Trip Starts","average_daily_trips":"Avg Daily Trips","station_latitude":"Latitude","station_longitude":"Longitude","station_name":"Station Name"}}}],"transparent":true,"type":"news"}],"refresh":false,"schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"2017-04-01T00:00:00.000Z","to":"2018-05-31T23:59:59.000Z"},"timepicker":{},"timezone":"","title":"Citibike Example: Overview","uid":"krY2rty7z","version":11,"weekStart":""}}