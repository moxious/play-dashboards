{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":false,"canDelete":false,"slug":"influx-2-2-internal-metrics","url":"/d/iZYe3m2Gz/influx-2-2-internal-metrics","expires":"0001-01-01T00:00:00Z","created":"2022-06-02T23:29:38Z","updated":"2022-11-30T08:56:26Z","updatedBy":"matt.abrams@grafana.com","createdBy":"matt.abrams@grafana.com","version":17,"hasAcl":false,"isFolder":false,"folderId":1495,"folderUid":"2EvL7P9nk","folderTitle":"play 2.0","folderUrl":"/dashboards/f/2EvL7P9nk/play-2-0","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}},"hasPublicDashboard":false,"publicDashboardAccessToken":"","publicDashboardUid":"","publicDashboardEnabled":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"InfluxDB 2.0 OSS Metrics","editable":true,"fiscalYearStartMonth":0,"gnetId":13315,"graphTooltip":0,"id":1494,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"decimals":2,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"s"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":0,"y":0},"id":2,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"]  == \"influxdb_uptime_seconds\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"gauge\")\r\n  |\u003e last()","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Uptime","type":"stat"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"fieldConfig":{"defaults":{"custom":{"align":"auto","displayMode":"color-text","filterable":true,"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]}},"overrides":[]},"gridPos":{"h":4,"w":20,"x":4,"y":0},"id":15,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_info\")\n  |\u003e last()\n","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Instance Info","type":"table"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":4},"id":16,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_organizations_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Orgs","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":4},"id":17,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_users_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()\r\n  |\u003e yield(name: \"last\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Users","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":4},"id":19,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_buckets_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Buckets","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":18,"y":4},"id":21,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_tokens_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()\r\n  |\u003e yield(name: \"last\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Tokens","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":7},"id":3,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_telegrafs_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()\r\n  |\u003e yield(name: \"last\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Telegrafs","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":7},"id":18,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_dashboards_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()\r\n  |\u003e yield(name: \"last\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Dashboards","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":7},"id":20,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"influxdb_scrapers_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e last()\r\n  |\u003e yield(name: \"last\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Scrapers","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#00c9ff","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":18,"y":7},"id":22,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"task_scheduler_total_runs_active\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"gauge\")\r\n  |\u003e last()\r\n  |\u003e yield(name: \"last\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Tasks active","type":"stat"},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"reqps"},"overrides":[]},"gridPos":{"h":6,"w":12,"x":0,"y":10},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"9.2.7-0f96ed148c","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"http_api_requests_total\")\r\n  |\u003e filter(fn: (r) =\u003e r.path == \"/api/v2/query\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e derivative(unit: v.windowPeriod, nonNegative: true)\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e yield(name: \"derivative\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Query Requests","type":"timeseries"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"unit":"iops"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":12,"x":12,"y":10},"hiddenSeries":false,"id":5,"legend":{"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.2.7-0f96ed148c","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"boltdb_reads_total\" or r._measurement == \"boltdb_writes_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e derivative(unit: v.windowPeriod, nonNegative: true)\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e drop(columns: [\"_field\"])\r\n  |\u003e yield(name: \"derivative\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"Local Object Store IO","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:880","format":"iops","logBase":1,"show":true},{"$$hashKey":"object:881","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":6,"w":8,"x":0,"y":16},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"8.5.4","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"go_memstats_alloc_bytes_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e derivative(unit: v.windowPeriod, nonNegative: true)\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e yield(name: \"derivative\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Memory Allocations","type":"timeseries"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"unit":"bytes"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":8,"x":8,"y":16},"hiddenSeries":false,"id":13,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.2.7-0f96ed148c","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"go_memstats_mallocs_total\" or r._measurement == \"go_memstats_frees_total\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"counter\")\r\n  |\u003e derivative(unit: v.windowPeriod, nonNegative: false)\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e yield(name: \"derivative\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"Memory Alloc \u0026 Frees","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1313","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:1314","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"$ds"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":6,"w":8,"x":16,"y":16},"id":11,"options":{"legend":{"calcs":["lastNotNull","max"],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"8.5.4","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"bytes_used = from(bucket: \"grafana\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"go_memstats_alloc_bytes\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"gauge\")\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e drop(columns: [\"_start\", \"_stop\"])\r\n  \r\ntotal_bytes = from(bucket: \"_monitoring\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r._measurement == \"go_memstats_sys_bytes\")\r\n  |\u003e filter(fn: (r) =\u003e r._field == \"gauge\")\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e drop(columns: [\"_start\", \"_stop\"])\r\n\r\njoin(tables: {key1: bytes_used, key2: total_bytes}, on: [\"_time\", \"_field\"], method: \"inner\")\r\n  |\u003e map(fn: (r) =\u003e ({\r\n    _time: r._time,\r\n    _value: (float(v: r._value_key1) / float(v: r._value_key2)) * 100.0,\r\n    _field: \"Memory Usage Percent\"\r\n  }))\r\n  |\u003e yield(name: \"percentage\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Memory Usage [%]","type":"timeseries"}],"refresh":false,"schemaVersion":37,"style":"dark","tags":["influxdb","flux","community","ds-example"],"templating":{"list":[{"current":{"selected":false,"text":"InfluxDB v2.2 + Flux","value":"InfluxDB v2.2 + Flux"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"ds","options":[],"query":"influxdb","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{},"timezone":"","title":"Influx 2.2: Internal Metrics","uid":"iZYe3m2Gz","version":17,"weekStart":""}}