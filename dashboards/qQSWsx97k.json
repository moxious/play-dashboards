{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":false,"canDelete":false,"slug":"2748-esc-variables-with-same-name-custom","url":"/d/qQSWsx97k/2748-esc-variables-with-same-name-custom","expires":"0001-01-01T00:00:00Z","created":"2022-06-01T15:41:06Z","updated":"2022-09-08T13:13:19Z","updatedBy":"polinaboneva","createdBy":"josh.hunt@grafana.com","version":17,"hasAcl":false,"isFolder":false,"folderId":1113,"folderUid":"8OticeRnk","folderTitle":"Replicating issues","folderUrl":"/dashboards/f/8OticeRnk/replicating-issues","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}},"hasPublicDashboard":false,"publicDashboardAccessToken":"","publicDashboardUid":"","publicDashboardEnabled":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":1493,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"graphite","uid":"000000001"},"gridPos":{"h":12,"w":12,"x":0,"y":0},"id":7,"options":{"content":"## Instructions\n\n1. Change the selected value for the `custom` variable. Notice how the panel is updated as expected\n2. Change the selected value for the `custom_same_labels` variable. Notice how the panel is _not_ updated as expected.\n3. Click the \"Refresh dashboard\" button. Notice how the panel will now show the correct value\n\nWe don't correctly trigger panels to re-query when the variable is changed to another one which has the same label, but different value\n","mode":"markdown"},"pluginVersion":"9.1.3-5f01ebf","title":"Panel Title","type":"text"},{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":6,"x":12,"y":0},"id":2,"links":[],"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"name"},"pluginVersion":"9.1.3-5f01ebf","targets":[{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"editorMode":"code","expr":"1","legendFormat":"$graphite_server","range":true,"refId":"A"}],"title":"graphite_server","type":"stat"},{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":6,"x":18,"y":0},"id":3,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"name"},"pluginVersion":"9.1.3-5f01ebf","targets":[{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"editorMode":"code","expr":"1","legendFormat":"$graphite_server_filtered","range":true,"refId":"A"}],"title":"graphite_server_filtered","type":"stat"},{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":6,"x":12,"y":6},"id":4,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"name"},"pluginVersion":"9.1.3-5f01ebf","targets":[{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"editorMode":"code","expr":"1","legendFormat":"$custom","range":true,"refId":"A"}],"title":"custom","type":"stat"},{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":6,"x":18,"y":6},"id":5,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"name"},"pluginVersion":"9.1.3-5f01ebf","targets":[{"datasource":{"type":"prometheus","uid":"NfggWZLGz"},"editorMode":"code","expr":"1","legendFormat":"$custom_same_labels","range":true,"refId":"A"}],"title":"custom_same_labels","type":"stat"}],"schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":true,"text":"backend_03","value":"backend_03"},"datasource":{"type":"graphite","uid":"000000001"},"definition":"apps.backend.*","hide":0,"includeAll":true,"multi":true,"name":"graphite_server","options":[],"query":"apps.backend.*","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":"backend","value":"04"},"datasource":{"type":"graphite","uid":"000000001"},"definition":"apps.backend.*","hide":0,"includeAll":false,"multi":false,"name":"graphite_server_filtered","options":[],"query":"apps.backend.*","refresh":1,"regex":"(?\u003ctext\u003e.*)_(?\u003cvalue\u003e\\d+)","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":"backend_4","value":"4"},"hide":0,"includeAll":false,"multi":false,"name":"custom","options":[{"selected":false,"text":"backend_1","value":"1"},{"selected":false,"text":"backend_2","value":"2"},{"selected":false,"text":"backend_3","value":"3"},{"selected":true,"text":"backend_4","value":"4"}],"query":"backend_1 : 1,backend_2 : 2,backend_3 : 3,backend_4 : 4","queryValue":"","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":"backend","value":"2"},"hide":0,"includeAll":false,"multi":false,"name":"custom_same_labels","options":[{"selected":false,"text":"backend","value":"1"},{"selected":true,"text":"backend","value":"2"},{"selected":false,"text":"backend","value":"3"},{"selected":false,"text":"backend","value":"4"}],"query":"backend : 1,backend : 2,backend : 3,backend : 4","queryValue":"","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"#2748 Esc Variables with same name ${custom}","uid":"qQSWsx97k","version":17,"weekStart":""}}