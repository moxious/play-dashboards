{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":false,"canDelete":false,"slug":"source-module","url":"/d/14UHpptVz/source-module","expires":"0001-01-01T00:00:00Z","created":"2022-12-27T20:39:59Z","updated":"2022-12-27T20:39:59Z","updatedBy":"matt.abrams@grafana.com","createdBy":"matt.abrams@grafana.com","version":1,"hasAcl":false,"isFolder":false,"folderId":1336,"folderUid":"Z1IigyAnk","folderTitle":"z Community Support","folderUrl":"/dashboards/f/Z1IigyAnk/z-community-support","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}},"hasPublicDashboard":false,"publicDashboardAccessToken":"","publicDashboardUid":"","publicDashboardEnabled":false},"dashboard":{"datasource":{"type":"vertamedia-clickhouse-datasource","uid":"Dxgj7aB7z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"bars","fillOpacity":90,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"decimals":0,"mappings":[{"options":{"bm":{"index":0,"text":"GTTD Admission"},"cu":{"index":1,"text":"GTTD Ads"},"e":{"index":2,"text":"GTTD Experience"}},"type":"value"}],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"locale"},"overrides":[{"matcher":{"id":"byName","options":"Admission Module"},"properties":[{"id":"color","value":{"fixedColor":"dark-green","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"GTTD Ads"},"properties":[{"id":"color","value":{"fixedColor":"semi-dark-red","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Experience Module"},"properties":[{"id":"color","value":{"fixedColor":"light-blue","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Unknonw"},"properties":[{"id":"color","value":{"fixedColor":"text","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Unknown"},"properties":[{"id":"color","value":{"fixedColor":"text","mode":"fixed"}}]}]},"gridPos":{"h":10,"w":20,"x":4,"y":29},"id":1768,"options":{"legend":{"calcs":["mean","sum"],"displayMode":"table","placement":"right","showLegend":true,"sortBy":"Total","sortDesc":true},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"database":"word_frontend_status","datasource":{"type":"vertamedia-clickhouse-datasource","uid":"Dxgj7aB7z"},"dateTimeType":"DATETIME","extrapolate":true,"format":"time_series","formattedQuery":"SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t","intervalFactor":1,"query":"select\ntoDate(timestamp, 'Asia/Shanghai') as t,\nvisitParamExtractString(post_extra, 'source_module') as source_module,\ncount() as \"PV\"\nfrom\n\t  ttd_page_view a\n    left join (select * from experience.activity_base_info where toDate(create_time) = (select toDate(max(create_time)) from experience.activity_base_info)) b on replaceOne(a.page_obj, 'activity_', '') = toString(b.activity_id)\n    left join word_frontend_status.ttd_sub_category_info c on b.sub_category_id = toInt32(c.sub_category_id)\nwhere\n\t  timestamp \u003e= toDateTime(${__from:date:seconds}) and timestamp \u003c= ${__to:date:seconds}\n\t  and visitParamExtractString(post_extra, 'source_channel') = 'googlettd'\n\t  and b.sub_category_id in($category_id)\t  \n\t  and b.country_name in($country)\ngroup by t,source_module\norder by t, PV desc\t  ","rawQuery":"select\ntoDate(timestamp, 'Asia/Shanghai') as t,\nvisitParamExtractString(post_extra, 'source_module') as source_module,\ncount() as \"PV\"\nfrom\n\t  ttd_page_view a\n    left join (select * from experience.activity_base_info where toDate(create_time) = (select toDate(max(create_time)) from experience.activity_base_info)) b on replaceOne(a.page_obj, 'activity_', '') = toString(b.activity_id)\n    left join word_frontend_status.ttd_sub_category_info c on b.sub_category_id = toInt32(c.sub_category_id)\nwhere\n\t  timestamp \u003e= toDateTime(1666698822) and timestamp \u003c= 1667303622\n\t  and visitParamExtractString(post_extra, 'source_channel') = 'googlettd'\n\t  and b.sub_category_id in(1,415)\t  \n\t  and b.country_name in('Taiwan','Mainland China','','Thailand','Australia','Singapore','Philippines','Malaysia','Japan','Vietnam','Indonesia','South Korea','India','United States','New Zealand','UAE','Cambodia','Sri Lanka','Spain','United Kingdom','Fiji','Turkey','France','Italy','Nepal','Switzerland','Netherlands','Laos','Qatar','Germany','Myanmar','Bhutan','Maldives','Canada','Portugal','Austria','Palau','Iceland','Norway','Albania','Oman','Tanzania','Czech Republic','Finland','Morocco','South Africa','Belgium','Denmark','Ireland')\ngroup by t,source_module\norder by t, PV desc","refId":"A","round":"0s","skip_comments":true}],"title":"Source Module","transformations":[{"id":"seriesToColumns","options":{"byField":"Time"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"%7Bsrc%7D":"Unknonw","PV":"Unknown","bm":"Admission Module","cu":"GTTD Ads","e":"Experience Module"}}}],"type":"timeseries","uid":"14UHpptVz","version":1}}