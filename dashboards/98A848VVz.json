{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":false,"canDelete":false,"slug":"state-duration-data","url":"/d/98A848VVz/state-duration-data","expires":"0001-01-01T00:00:00Z","created":"2022-10-06T01:28:02Z","updated":"2022-10-30T18:35:31Z","updatedBy":"grant@detroitsteeltreating.com","createdBy":"grant@detroitsteeltreating.com","version":13,"hasAcl":false,"isFolder":false,"folderId":461,"folderUid":"KbH7u4Pmz","folderTitle":"Data source: Influx DB","folderUrl":"/dashboards/f/KbH7u4Pmz/data-source-influx-db","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}},"hasPublicDashboard":false,"publicDashboardAccessToken":"","publicDashboardUid":"","publicDashboardEnabled":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"used for InfluxDB alerting","editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":1618,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"stepAfter","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":5,"w":24,"x":0,"y":0},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"from(bucket: \"RetroEncabulator\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"BooleanData\")\n  |\u003e filter(fn: (r) =\u003e r[\"Location\"] == \"FrontDoor\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"switch_state\")\n  |\u003e yield(name: \"switch_state\")","refId":"A"}],"title":"Panel Title","type":"timeseries"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":5,"w":11,"x":0,"y":5},"id":10,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":[],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.2-eb6f0ffe76","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"from(bucket: \"RetroEncabulator\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"BooleanData\")\n  |\u003e filter(fn: (r) =\u003e r[\"Location\"] == \"FrontDoor\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"switch_state\")\n  |\u003e stateDuration(fn: (r) =\u003e r._value == true)\n  |\u003e group(columns: [\"_value\"])\n  |\u003e count(column: \"stateDuration\")\n  |\u003e yield(name: \"switch_state\")","refId":"A"}],"timeFrom":"15m","title":"State over past 15 minutes","type":"stat"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":5,"w":13,"x":11,"y":5},"id":11,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":[],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.2.2-eb6f0ffe76","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"from(bucket: \"RetroEncabulator\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"BooleanData\")\n  |\u003e filter(fn: (r) =\u003e r[\"Location\"] == \"FrontDoor\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"switch_state\")\n  |\u003e stateDuration(fn: (r) =\u003e r._value == true)\n  |\u003e group(columns: [\"_value\"])\n |\u003e count(column: \"stateDuration\")\n  |\u003e yield(name: \"switch_state\")","refId":"A"}],"timeFrom":"1d","title":"State over past 24 hours","transformations":[{"id":"calculateField","options":{"alias":"hours false","binary":{"left":"stateDuration false","operator":"/","reducer":"sum","right":"60"},"mode":"binary","reduce":{"reducer":"sum"},"replaceFields":true}},{"id":"calculateField","options":{"alias":"hours true","binary":{"left":"stateDuration true","operator":"/","reducer":"sum","right":"60"},"mode":"binary","reduce":{"reducer":"sum"},"replaceFields":true}}],"type":"stat"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto","inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":17,"w":14,"x":10,"y":10},"id":9,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"9.2.2-eb6f0ffe76","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"from(bucket: \"RetroEncabulator\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"BooleanData\")\n  |\u003e filter(fn: (r) =\u003e r[\"Location\"] == \"FrontDoor\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"switch_state\")\n  |\u003e yield(name: \"switch_state\")","refId":"A"}],"title":"Panel Title","type":"table"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byFrameRefID","options":"A"},"properties":[{"id":"displayName","value":"bytes_recv"}]},{"matcher":{"id":"byFrameRefID","options":"B"},"properties":[{"id":"displayName","value":"bytes_sent"}]}]},"gridPos":{"h":18,"w":17,"x":0,"y":27},"id":13,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"from(bucket: \"HyperEncabulator\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"TemperatureData\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"MeasType\"] == \"actual\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"Tank\"] == \"B4\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"Temperature\")\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e yield(name: \"mean\")","refId":"A"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"hide":false,"query":"from(bucket: \"HyperEncabulator\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"TemperatureData\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"MeasType\"] == \"actual\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"Tank\"] == \"C3\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"Temperature\")\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e yield(name: \"mean\")","refId":"B"}],"title":"Sample Data","transformations":[{"id":"organize","options":{}}],"type":"timeseries"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto","inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":4,"w":11,"x":0,"y":45},"id":4,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"9.2.2-eb6f0ffe76","targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"import \"array\"\nimport \"system\"\n\narray.from(rows: [{time: system.time()}])","refId":"A"}],"title":"The current time is","type":"table"},{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":15,"w":12,"x":0,"y":49},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"query":"from(bucket: \"HyperEncabulator\")\r\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"TemperatureData\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"MeasType\"] == \"setpoint\" or r[\"MeasType\"] == \"actual\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"Tank\"] == \"${Tank}\")\r\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"Temperature\")\r\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |\u003e yield(name: \"mean\")","refId":"A"}],"title":"Temperature Data","type":"timeseries"}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":true,"text":"B4","value":"B4"},"datasource":{"type":"influxdb","uid":"M3k6ZPrnz"},"definition":"import \"influxdata/influxdb/schema\"\r\nschema.tagValues(\r\n    bucket: \"HyperEncabulator\",\r\n    tag: \"Tank\"\r\n)","hide":0,"includeAll":false,"label":"Tank ID","multi":false,"name":"Tank","options":[],"query":"import \"influxdata/influxdb/schema\"\r\nschema.tagValues(\r\n    bucket: \"HyperEncabulator\",\r\n    tag: \"Tank\"\r\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"State Duration Data","uid":"98A848VVz","version":13,"weekStart":""}}